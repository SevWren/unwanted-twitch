!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="67e667a4-3183-458d-a27f-0bb07b5ceecf",e._sentryDebugIdIdentifier="sentry-dbid-67e667a4-3183-458d-a27f-0bb07b5ceecf")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[67954],{924123:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ChannelPage_SetSessionStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetSessionStatusInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setSessionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setAgainInSeconds"},arguments:[],directives:[]}]}}]}}]};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var t={};n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),t[e.name.value]=n}})),e.exports=n},936303:function(e){e.exports={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ContentDiscoveryPreferenceFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DiscoveryPreference"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isBlocked"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"previewBlur"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEnabled"},arguments:[],directives:[]}]}}]}}]}},869715:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DiscoveryPreferenceMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SetDiscoveryPreferenceInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setDiscoveryPreference"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"preference"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ContentDiscoveryPreferenceFragment"},directives:[]}]}}]}}]}}]},r={};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}t.definitions=t.definitions.concat(i(936303).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)})));var a={};t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),a[e.name.value]=n}})),e.exports=t},268634:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DiscoveryPreferenceQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"discoveryPreference"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ContentDiscoveryPreferenceFragment"},directives:[]}]}}]}}]},r={};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}t.definitions=t.definitions.concat(i(936303).definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)})));var a={};t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),a[e.name.value]=n}})),e.exports=t},843431:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"DropCurrentSessionContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dropCurrentSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"channelLogin"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}},{kind:"Argument",name:{kind:"Name",value:"channelID"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"dropCurrentSessionData"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"dropCurrentSessionData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DropCurrentSession"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentMinutesWatched"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"requiredMinutesWatched"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dropID"},arguments:[],directives:[]}]}}]};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var t={};n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),t[e.name.value]=n}})),e.exports=n},827077:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserMenuCurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSharingActivity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility"},arguments:[],directives:[]}]}}]}}]}}]};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var t={};n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),t[e.name.value]=n}})),e.exports=n},611407:function(e,n,i){"use strict";i.d(n,{C:function(){return l}});var t=i(726561),r=i(632017),o=i.n(r),a=i(296540),s=i(783321),u=i(456450);function c(e){var n=(0,a.useRef)(e);return o()(e,n.current)||(n.current=e),n.current}function l(e){var n=(0,t.F)(e.mutator),i=(0,t.F)(e.skipMessage),r=c(e.types),o=c(e.variables),l=(0,s.mK)(),d=(0,a.useCallback)((function(e,i){return n.current(e,i)}),[n]),f=(0,a.useCallback)((function(e,n){return!!i.current&&i.current(e,n)}),[i]);(0,a.useEffect)((function(){if(!e.skip){var n=(0,u.Hq)({query:e.query,variables:o,topic:e.topic,type:e.type,types:r,mutator:d,skipMessage:f},l);return function(){n()}}}),[e.skip,e.query,e.topic,e.type,r,o,d,f,l])}},145748:function(e,n,i){"use strict";i.d(n,{D:function(){return l}});var t=i(331635),r=i(726561),o=i(16019),a=i(727234),s=i(296540),u=i(452088),c=i(214120);function l(e,n){void 0===n&&(n={});var i=(0,r.F)(n.skipMessage),l=(0,s.useState)(null),d=l[0],f=l[1],p=(0,s.useRef)(null),g=(0,o.C)()[1],m=(0,s.useRef)(0),v=(0,s.useCallback)((function(){f((function(e){return(0,t.__assign)((0,t.__assign)({},e),{isSubscribing:!1})}))}),[]),h=(0,s.useCallback)((function(e){f((function(n){return(0,t.__assign)((0,t.__assign)({},n),{error:e,isSubscribing:!1})}))}),[]),k=(0,s.useCallback)((function(e){if(!n.jitterMSMax)return p.current=e,void g();m.current&&clearTimeout(m.current),m.current=setTimeout((function(){m.current=0,p.current=e,g()}),(0,c.yT)(n.jitterMSMax))}),[g,n.jitterMSMax]),S=(0,r.F)(k),_=(0,s.useCallback)((function(){clearTimeout(m.current),p.current=null}),[]),w=(0,a.Z)(e);return e!==w&&_(),(0,s.useEffect)((function(){if(!n.skip&&e){f((function(e){return(null==e?void 0:e.isSubscribing)?null:(0,t.__assign)((0,t.__assign)({},e),{isSubscribing:!0})}));var r=u.UE.subscribe({topic:e,success:v,failure:h,onMessage:function(e){i.current&&i.current(e)||S.current(e)}});return function(){r(),f(null),_()}}}),[_,h,v,n.skip,S,i,e]),[p.current,d]}},218716:function(e,n,i){"use strict";i.d(n,{Pn:function(){return u},_L:function(){return t},iQ:function(){return o},kg:function(){return r},mb:function(){return s},sO:function(){return a}});var t=1e3,r=60*t,o=60*r,a=24*o,s=7*a,u=30*a},214120:function(e,n,i){"use strict";function t(e,n){if(void 0===n&&(n=0),n>e){var i=n;n=e,e=i}return n+Math.floor(Math.random()*(e-n+1))}function r(e){return e[t(e.length-1)]}function o(e,n){for(var i=0,t=[];i<e;)t.push(n(i)),i+=1;return t}i.d(n,{Hn:function(){return o},XM:function(){return r},yT:function(){return t}})},987022:function(e,n,i){"use strict";i.d(n,{$R:function(){return S},$c:function(){return h},CP:function(){return _},Jk:function(){return k},VS:function(){return w},qL:function(){return v}});var t=i(331635),r=i(452088),o=i(267924),a=i(131883),s=i(300780),u=i(924123),c=i.n(u),l="twilight.sessionID",d=0,f=new s.n(3e3),p=r.vF.withCategory("Session Status"),g={sessionID:r.x2.session.tabID,availability:o.SJR.OFFLINE,activity:null},m=g;function v(e,n){switch(p.debug("Updating activity",e),m=(0,t.__assign)((0,t.__assign)({},m),{activity:e}),r.x2.experiments.__hardcodedStaleExperiment("twilight_presence_smoothing","debounce_and_raid_heartbeat")){case"debounce":f.invoke((function(){return b()}));break;case"debounce_and_raid_heartbeat":n&&d?f.clear():f.invoke((function(){return b()}));break;case"debounce_and_all_heartbeat":d||f.invoke((function(){return b()}));break;default:return b()}}function h(e){p.debug("Saving current availability",e),m=(0,t.__assign)((0,t.__assign)({},m),{availability:e})}function k(){h(o.SJR.ONLINE)}function S(){h(o.SJR.IDLE)}function _(){p.debug("Clearing activity"),m=(0,t.__assign)((0,t.__assign)({},m),{activity:null}),b()}function w(){return(0,t.__awaiter)(this,void 0,void 0,(function(){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return p.debug("Clearing previous session"),m={sessionID:r.IG.get(l,""),availability:o.SJR.ONLINE,activity:null},[4,b()];case 1:return e.sent(),p.debug("Setting new session"),m=(0,t.__assign)((0,t.__assign)({},m),{sessionID:r.x2.session.tabID}),n=r.x2.session.tabID,r.IG.set(l,n),[4,b()];case 2:return[2,e.sent()]}var n}))}))}function b(){return(0,t.__awaiter)(this,void 0,void 0,(function(){var e,n,i,o;return(0,t.__generator)(this,(function(t){switch(t.label){case 0:if(!(0,a.M3)(r.x2.store.getState()))return[2];p.debug("Setting status on server",{state:m}),d&&(clearTimeout(d),d=0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.x2.apollo.client.mutate({mutation:c(),variables:{input:{sessionID:m.sessionID,availability:m.availability,activity:m.activity}}})];case 2:if(!(e=t.sent())||!e.data||!e.data.setSessionStatus)throw Error("EmptyResponse");if(!e.data.setSessionStatus.setAgainInSeconds)throw Error("InvalidSetAgainInSeconds");return n=e.data.setSessionStatus.setAgainInSeconds,p.debug("Status scheduled to be set again",{setAgainInSeconds:n}),d=setTimeout(b,1e3*n),[3,4];case 3:return i=t.sent(),o=5e4+2e4*Math.random(),p.warn("Failed to update status. Trying again in ".concat(o," seconds."),i),d=setTimeout(b,o),[3,4];case 4:return[2]}}))}))}},172100:function(e,n,i){"use strict";i.d(n,{HX:function(){return c},Rn:function(){return s},h5:function(){return u}});var t=i(474848),r=i(296540),o=(0,i(397568).q)("SelectedChannelLoginContext",{channelLogin:null,setChannelLogin:function(){return null}}),a=o.context,s=o.withContext,u=function(){return r.useContext(a)},c=function(e){var n=e.children,i=r.useState(null),o=i[0],s=i[1],u=r.useMemo((function(){return{channelLogin:o,setChannelLogin:s}}),[o,s]);return(0,t.jsx)(a.Provider,{value:u,children:n})}},861642:function(e,n,i){"use strict";i.d(n,{Mk:function(){return o},Qk:function(){return a},cE:function(){return r}});var t=i(452088),r=function(){t.E5.track("discovery_banner_click",{banner_title:"content_removed"})},o=function(){t.E5.track("discovery_banner_dismiss",{banner_title:"content_removed"})},a=function(e){t.E5.track("discovery_change_preference",e)}},347641:function(e,n,i){"use strict";i.d(n,{A6:function(){return m},BB:function(){return l},K1:function(){return a},UG:function(){return s},Xx:function(){return p},bR:function(){return c},eg:function(){return g},km:function(){return f},vD:function(){return d},vZ:function(){return u}});var t=i(882439),r=i(145463),o=i(198425);function a(e,n){return void 0===n&&(n=""),(0,o.yJ)(e,"/content/video-producer".concat(n))}function s(e,n){return a(e,"/edit/".concat(n))}function u(e,n){return a(e,"/highlighter/".concat(n))}function c(e,n){return a(e,"/publish/".concat(n))}function l(e,n){return a(e,"/appeal/".concat(n))}function d(e,n){return void 0===n&&(n=""),(0,o.yJ)(e,"/content".concat(n))}function f(e,n){return void 0===n&&(n=""),d(e,"/collections".concat(n))}function p(e,n){return void 0===n&&(n=""),f(e,"/".concat(n))}function g(e){return d(e,"/clips")}function m(e,n,i){var o=t.stringify({tt_content:i.content,tt_medium:i.medium});return(0,r.VV)("/".concat(e,"/clip/").concat(n,"?").concat(o))}},626428:function(e,n,i){"use strict";i.d(n,{AC:function(){return v},K7:function(){return m},NA:function(){return g},On:function(){return p},PR:function(){return f},Po:function(){return o},Qk:function(){return d},Wd:function(){return l},g9:function(){return s},j4:function(){return h},w7:function(){return a},xj:function(){return c}});var t=i(198425),r=function(e,n){return void 0===n&&(n=""),(0,t.yJ)(e,"/analytics".concat(n))};function o(e,n){return{pathname:r(e),state:{content:n.content,medium:n.medium},search:n.search}}function a(e,n){return{pathname:r(e,"/viewer-discovery/notifications"),state:n}}var s,u=function(e,n){return void 0===n&&(n=""),r(e,"/revenue-earnings".concat(n))};function c(e,n){return{pathname:u(e),state:{content:n.content,medium:n.medium},search:n.search}}function l(e,n,i){return void 0===i&&(i=location.search),{pathname:u(e,"/subscriptions"),search:i,state:n}}function d(e){return{pathname:u(e,"/subscriptions/manage-founders")}}function f(e,n){return{pathname:r(e,"/revenue-payouts"),state:n}}function p(e,n){return void 0===n&&(n=""),(0,t.yJ)(e,"/analytics/stream-summary".concat(n))}function g(e,n){return{pathname:p(e.channelLogin,"/".concat(e.id)),state:n}}function m(e){return{pathname:r(e,"/viewer-engagement/retention")}}function v(e,n){var i=e.channelLogin,t=e.id;return{pathname:p(i,"/".concat(t,"/referrals")),state:n}}function h(e,n){return p(e.channelLogin,"/".concat(e.id,"?tt_content=").concat(n.content,"&tt_medium=").concat(n.medium))}!function(e){e.VodID="vod-id",e.VodChart="vod-chart"}(s||(s={}))},198425:function(e,n,i){"use strict";i.d(n,{Vi:function(){return o},XY:function(){return c},_t:function(){return a},fY:function(){return l},m$:function(){return s},yJ:function(){return u},yV:function(){return d}});var t=i(145463),r=!1;function o(){return r}function a(){r=!0}function s(e,n){return void 0===e&&(e=""),(0,t.VV)(e,"dashboard",n)}function u(e,n){return void 0===n&&(n=""),s(e?"/u/".concat(e).concat(n):n)}function c(e){return u(e,"/stream-manager")}function l(e){return u(e,"/home")}function d(e){return(0,t.VV)("/".concat(e))}},154125:function(e,n,i){"use strict";i.d(n,{gQ:function(){return k},JI:function(){return S}});var t=i(474848),r=i(973421),o=i.n(r),a=(i(296540),i(783321)),s=i(640598),u=i(982821),c=i(503472),l=i(397568),d=i(172100),f=i(331635),p=i(659456),g=i(843431),m=i.n(g),v=(0,l.q)("DropsSessionContext",{loading:!1,data:void 0,refetch:void 0}),h=v.context,k=(v.withContext,h),S=function(e){var n,i=(0,p.N)(),r=(0,d.h5)(),l=(null==i?void 0:i.channelLogin)||(null==r?void 0:r.channelLogin)||"",g=(0,a.IT)(m(),{skip:!l,variables:{channelLogin:l}}),v=g.loading,k=g.data,S=g.refetch,_=null===(n=null==k?void 0:k.currentUser)||void 0===n?void 0:n.dropCurrentSession,w=e.currentUserID?"".concat(u.fL.UserDropEvents,".").concat(e.currentUserID):"";return(0,s.s)({topic:w,skip:!e.currentUserID,onMessage:function(e){var n,i,t,r,a;if(e&&e.type===u.PD.DropSessionStatus){if(e.data.channel_id!==(null===(t=null===(i=null===(n=null==k?void 0:k.currentUser)||void 0===n?void 0:n.dropCurrentSession)||void 0===i?void 0:i.channel)||void 0===t?void 0:t.id)||e.data.drop_id!==(null===(a=null===(r=null==k?void 0:k.currentUser)||void 0===r?void 0:r.dropCurrentSession)||void 0===a?void 0:a.dropID))return void S({channelID:e.data.channel_id||""});if(!k||!_)return;(0,c.oR)(m(),{channelLogin:l},(function(n){return o()(n,(function(e){var n;return null===(n=null==e?void 0:e.currentUser)||void 0===n?void 0:n.dropCurrentSession}),(function(n){return function(e,n){if(e)return(0,f.__assign)((0,f.__assign)({},e),{currentMinutesWatched:n.data.current_progress_min,requiredMinutesWatched:n.data.required_progress_min})}(n,e)}))}))}}}),(0,t.jsx)(h.Provider,{value:{loading:v,data:k,refetch:S},children:e.children})}},525594:function(e,n,i){"use strict";i.d(n,{z:function(){return p}});var t=i(331635),r=i(474848),o=i(296540),a=i(503988),s=i(868238),u=i(452088),c=i(300235),l=i(732446),d=i(156410),f=i(882439);function p(e,n){return function(i){var p=function(e){function o(i){var r=e.call(this,i)||this;return r.logger=u.vF.withCategory("withPageTracking"),r.tracked=!1,r.referenceTracking={},r.onHistoryChange=function(e){e.action!==a.rc.Replace&&(r.tracked=!1,r.referenceTracking={})},r.trackPageview=function(){if(!(r.tracked||n.skipPageviewTracking&&n.skipPageviewTracking(r.props))){r.tracked=!0;var e={};"function"==typeof n.pageviewProperties?e=n.pageviewProperties(r.props):n.pageviewProperties&&(e=(0,t.__assign)({},n.pageviewProperties));var i=(0,t.__assign)((0,t.__assign)({},r.referenceTracking),e),o=r.props.location.state;u.x2.tracking.trackPageview((0,t.__assign)((0,t.__assign)({},i),{content:void 0===(null==o?void 0:o.content)?i.content:o.content,medium:void 0===(null==o?void 0:o.medium)?i.medium:o.medium,content_index:void 0===(null==o?void 0:o.content_index)?i.content_index:o.content_index,email_id:void 0===(null==o?void 0:o.email_id)?i.email_id:o.email_id,location:n.location}))}},u.x2.sentry.setTracingTransactionName(n.location),i.latencyTracking.setLocation(n.location),r}return(0,t.__extends)(o,e),o.prototype.componentDidMount=function(){var e=this.props,n=e.location,i=n.pathname,r=n.hash,o=n.search,a=e.navigate,s=e.subscribe,c=function(e){var n,i,r,o,a,s,c,l,d,p,g=""!==e?f.parse(e):{},m=null!==(i=null===(n=u.x2.config.portals)||void 0===n?void 0:n.getTrackingParams())&&void 0!==i?i:{},v=(0,t.__assign)((0,t.__assign)({},g),m),h={content:null===(r=v.tt_content)||void 0===r?void 0:r.toString(),content_index:v.tt_content_index?parseInt(v.tt_content_index.toString(),10):void 0,medium:null===(o=v.tt_medium)||void 0===o?void 0:o.toString(),email_id:null===(a=v.tt_email_id)||void 0===a?void 0:a.toString(),utm_campaign:null===(s=v.utm_campaign)||void 0===s?void 0:s.toString(),utm_content:null===(c=v.utm_content)||void 0===c?void 0:c.toString(),utm_medium:null===(l=v.utm_medium)||void 0===l?void 0:l.toString(),utm_source:null===(d=v.utm_source)||void 0===d?void 0:d.toString(),utm_term:null===(p=v.utm_term)||void 0===p?void 0:p.toString()};delete v.tt_content,delete v.tt_content_index,delete v.tt_medium,delete v.tt_email_id,delete v.utm_campaign,delete v.utm_content,delete v.utm_medium,delete v.utm_source,delete v.utm_term;var k=f.stringify(v);return{referenceTracking:h,search:k.length>0?"?".concat(k):""}}(o);c.search!==o&&(this.logger.debug("Replacing history with stripped tt params"),a({pathname:i,hash:r,search:c.search},{replace:!0})),this.referenceTracking=c.referenceTracking,s(this.onHistoryChange),this.trackPageview()},o.prototype.componentDidUpdate=function(){this.trackPageview()},o.prototype.render=function(){return(0,r.jsx)(i,(0,t.__assign)({},this.props))},o.displayName=(0,c.K)(o.name,i),o}(o.Component);return(0,s.Zz)(l.y,(0,d.tQ)(e,{destination:n.destination,autoReportInteractive:n.autoReportInteractive}))(p)}}},244402:function(e,n,i){"use strict";i.d(n,{V:function(){return f},p:function(){return l}});var t=i(331635),r=i(296540),o=i(407827),a=i(681685),s=i(78004),u=i(518240),c=i(158696),l=o.x.wrap((function(){return Promise.all([i.e(30592),i.e(82196)]).then(i.bind(i,609366))}),"OnboardingModal"),d={action:a.W.OnboardingModal},f=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onboardingSource=c.P9.NewSignup,n.shouldShowOnboarding=function(){return location.search.includes("onboard=1")?(n.onboardingSource=c.P9.DevForce,!0):!n.props.loading&&!(0,u.Lv)()&&(0,s.MT)(n.props.followedCount,n.props.createdAt)},n}return(0,t.__extends)(n,e),n.prototype.render=function(){return null},n.prototype.componentDidMount=function(){this.shouldShowOnboarding()&&this.startOnboarding()},n.prototype.componentDidUpdate=function(e){e.loading&&this.shouldShowOnboarding()&&this.startOnboarding()},n.prototype.startOnboarding=function(){(0,s.wk)(this.onboardingSource),this.props.showOnboardingModal((0,t.__assign)((0,t.__assign)({},d),{source:this.onboardingSource}))},n}(r.Component)},78004:function(e,n,i){"use strict";i.d(n,{MT:function(){return c},wk:function(){return l}});var t=i(218716),r=function(e){return e.getTime()>=o().getTime()},o=function(){return new Date((new Date).getTime()-2*t.mb)},a=i(518240),s=i(158696),u=3;function c(e,n){return e<u&&r(new Date(n))&&!(0,a.RJ)()}function l(e){(0,s.x1)({source:e}),(0,a.hI)()}},518240:function(e,n,i){"use strict";i.d(n,{Lv:function(){return s},RJ:function(){return u},hI:function(){return a}});var t=i(452088),r="twilight-onboarding",o="twilight-onboarding-prompt__dismissed";function a(){t.x2.storage.set(r,!0)}function s(){return t.x2.storage.get(r,!1)}function u(){return t.x2.storage.get(o,!1)}},158696:function(e,n,i){"use strict";i.d(n,{$_:function(){return u},BE:function(){return c},IA:function(){return s},P9:function(){return t},x1:function(){return a}});var t,r,o=i(452088);!function(e){e.HomepageCTA="homepage_cta",e.NewSignup="new_signup",e.UserMenu="user_menu",e.DevForce="dev_force"}(t||(t={})),function(e){e.Click="click",e.Impression="impression",e.Start="start",e.Dismissed="dismissed",e.Completed="completed"}(r||(r={}));var a=function(e){var n={source:e.source,action:r.Start};o.E5.track("onboarding_web",n)},s=function(e){var n={source:e,action:r.Completed};o.E5.track("onboarding_web",n)};function u(e){var n={item_position:e.itemPosition,item_tracking_id:e.itemTrackingID||null,model_tracking_id:e.modelTrackingID||null,row_position:e.rowPosition};o.E5.__track_SSRMigrationFixme("item_display",n)}function c(e){var n={item_position:e.itemPosition,item_tracking_id:e.itemTrackingID||null,model_tracking_id:e.modelTrackingID||null,row_position:e.rowPosition,component:e.component,selected:e.selected};o.E5.__track_SSRMigrationFixme("item_click",n)}},52548:function(e,n,i){"use strict";i.d(n,{H:function(){return a}});var t=i(474848),r=(i(296540),i(415044)),o=i(407827).x.wrap((function(){return Promise.all([i.e(27561),i.e(75331),i.e(31737),i.e(33246),i.e(10947)]).then(i.bind(i,224443))}),"OnsiteNotificationsContainer",{failSilently:!0,placeholder:null}),a=function(){return(0,r.d4)((function(e){return e.session.firstPageLoaded}))?(0,t.jsx)(o,{}):null}},659456:function(e,n,i){"use strict";i.d(n,{N:function(){return o}});var t=i(834455),r=i(576852),o=function(){var e,n,i=(0,t.zy)(),o=null===(e=i.state)||void 0===e?void 0:e.channelView,a=(0,t.RQ)({path:"/:channelLogin"}),s=!(!o||!a),u=(0,t.RQ)("/:channelLogin/video/:videoID"),c=!(!o||!u),l=(0,t.RQ)("/videos/:videoID"),d=!(!o||!l),f=(0,t.RQ)("/collections/:collectionID"),p=!(!o||!f),g=(0,t.RQ)("/:channelLogin/collection/:collectionID"),m=!(!o||!g),v=d||p?null:s?a.params.channelLogin:c?u.params.channelLogin:m?g.params.channelLogin:null,h=c?u.params.videoID:d?l.params.videoID:null,k=p?f.params.collectionID:m?g.params.collectionID:null!==(n=(0,r.ov)(i.search,"collection"))&&void 0!==n?n:null;return{channelLogin:null!=v?v:null,videoID:null!=h?h:null,collectionID:null!=k?k:null}}},153761:function(e,n,i){"use strict";i.d(n,{f:function(){return x}});var t=i(415044),r=i(868238),o=i(965353),a=i(331635),s=i(474848),u=i(959340),c=i(914421),l=i(379831),d=i(552400),f=i(392395),p=i(79004),g=i(912800),m=i(902418),v=i(296540),h=i(452088),k=i(337455),S=i(229226),_=i(825948),w=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={isEnabled:h.$W.forceBenchmarkingTools||h.IG.get(S.wK.forceToolsStorageKey,h.$W.forceBenchmarkingTools)},n.toggleLocalCookie=function(){h.IG.set(o.Ju,!n.state.isEnabled),h.IG.set(S.wK.forceToolsStorageKey,!n.state.isEnabled),location.reload()},n.onStaffConsoleToggle=function(){n.props.staffConsoleHidden?n.props.showStaffConsole():n.props.hideStaffConsole()},n}return(0,a.__extends)(n,e),n.prototype.render=function(){return this.props.user&&this.props.user.roles&&this.props.user.roles.isStaff||h.$W.buildType!==k.n.Production?(0,s.jsx)("div",{onClick:_.d,children:(0,s.jsx)(u.P,{className:"staff-console-toggle",children:(0,s.jsxs)(u.P,{display:c.nl.Flex,alignItems:c.k2.Center,children:[(0,s.jsx)(u.P,{margin:{right:.5},flexShrink:0,children:(0,s.jsx)(l.o,{checked:this.state.isEnabled,disabled:h.$W.forceBenchmarkingTools,onChange:this.toggleLocalCookie,label:"Staff Console"})}),(0,s.jsxs)(u.P,{display:c.nl.Flex,alignItems:c.k2.Center,fullWidth:!0,children:[!h.$W.forceBenchmarkingTools&&!this.state.isEnabled&&(0,s.jsx)(d.m,{label:"Enabling will reload the page",options:{placement:"bottom"},children:(0,s.jsx)(f.h,{size:16})}),h.$W.forceBenchmarkingTools&&(0,s.jsx)(d.m,{label:"Always enabled in dev",options:{placement:"bottom"},children:(0,s.jsx)(f.h,{size:16})}),(this.state.isEnabled||h.$W.forceBenchmarkingTools)&&(0,s.jsx)(u.P,{display:c.nl.Flex,margin:{left:.5},fullWidth:!0,justifyContent:c.A9.End,children:(0,s.jsx)(p.a2,{onClick:this.onStaffConsoleToggle,"aria-label":"Staff Console Toggle",icon:this.props.staffConsoleHidden?g.t.VisibilityShown:g.t.VisibilityHidden,size:m.f.Small})})]})]})})}):null},n}(v.Component),b=w;var x=(0,t.Ng)((function(e){return{staffConsoleHidden:e.staffConsole&&e.staffConsole.meta.hidden}}),(function(e){return(0,r.zH)({hideStaffConsole:o.Y0,showStaffConsole:o.$w},e)}))(b)},449041:function(e,n,i){"use strict";i.d(n,{B:function(){return Je}});var t,r=i(474848),o=i(959340),a=i(914421),s=i(296540),u=i(513683),c=i(415044),l=i(868238),d=i(732446),f=i(364217),p=i(331635),g=i(792486),m=i(97774),v=i(305528),h=i(79004),k=i(851870),S=i(990768),_=i(324602),w=i(452088),b=i(191132),x=i(928778),y=i(987022),C=i(267924),D=i(784351),N=i(82984),L=i(433086),j=i(368972),I=i(1166),M=i(822740),P=i(610987),T=i(460767),F=i(371439),U=i(428239),E=i(98234),A=i(195135),O=i(94433),R=i(796630),V=i(96773),W=i(319491),B=i(272256),H=i(216042),z=i(14668),G=i(723319),Q=i(132902),J=i(894722),$=i(718059),q=i(959385),K=i(337930),X=i(681685),Z=i(178196),Y=i(912800),ee=i(669022),ne=i(887791),ie=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,p.__extends)(n,e),n.prototype.render=function(){var e,n,i,t,o,a,s,u;return(null===(i=null===(n=null===(e=this.props)||void 0===e?void 0:e.consent)||void 0===n?void 0:n.consent)||void 0===i?void 0:i.shouldShowSettingsPage)&&(null===(a=null===(o=null===(t=this.props)||void 0===t?void 0:t.consent)||void 0===o?void 0:o.consent)||void 0===a?void 0:a.privacyLawName)!==C.QKh.ROW?(u="CCPAVendorConsent"===(null===(s=this.props.consent.consent.vendorConsentStatus)||void 0===s?void 0:s.__typename)?(0,w.hw)("Opt-out Preferences","ConsentUserMenuDropdown"):(0,w.hw)("Cookies & Ads Choices","ConsentUserMenuDropdown"),(0,r.jsx)(j.i,{onClick:this.props.showConsentTool,figure:{icon:Y.t.NotificationInfo},label:u,"data-a-target":"consent-dropdown-menu"})):null},n}(s.Component),te=(0,l.Zz)((0,c.Ng)(null,(function(e){return(0,l.zH)({showConsentTool:function(){return(0,Z.to)(ne.wk,{})}},e)})),ee.z3)(ie),re=i(347641),oe=i(198425),ae=i(626428),se=i(244402),ue=i(78004),ce=i(158696),le=i(153761),de=i(312663),fe=i(407590),pe=i(522777),ge=i(70931),me=i(783321),ve=i(869715),he=i.n(ve),ke=i(268634),Se=i.n(ke),_e=i(861642),we=i(606127),be=i(706439),xe=function(e){var n,i,t=e.width,s=(0,me.IT)(Se()).data,u=(0,we.k0)().addSnackbarToQueue,c=(0,me.n_)(he())[0];if(!s)return null;var l=!!(null===(i=null===(n=null==s?void 0:s.discoveryPreference)||void 0===n?void 0:n.options)||void 0===i?void 0:i.some((function(e){return e.isBlocked})));return(0,r.jsxs)(o.P,{padding:1,width:t?"".concat(t,"px"):void 0,children:[(0,r.jsxs)(o.P,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,r.jsx)(o.P,{padding:{right:2},children:(0,r.jsx)(de.N,{lines:2,fontWeight:"bold",children:(0,w.hw)("HIDE LABELED CONTENT","AnonCCLMenu")})}),(0,r.jsx)(fe.l,{checked:l,onChange:function(){var e,n;(0,_e.Qk)({preference_name:"filter_labeled_content",new_choice:l?"disabled":"enabled"}),c({onError:function(){u((0,r.jsx)(be.D,{duration:5e3,message:(0,w.hw)("Couldn't update content preferences right now, please try again later","AnonCCLMenu"),type:"error"}))},variables:{input:{isPreviewBlurEnabled:!!(null===(n=null===(e=null==s?void 0:s.discoveryPreference)||void 0===e?void 0:e.previewBlur)||void 0===n?void 0:n.isEnabled),blockedTypes:l?[]:["GAMBLING","SEXUAL_THEMES","VIOLENT_GRAPHIC","DRUGS_INTOXICATION","MATURE_GAME","PROFANITY_VULGARITY","DEBATED_SOCIAL_ISSUES_AND_POLITICS"]}}})}})]}),(0,r.jsx)(o.P,{display:"flex",margin:{y:1},children:(0,r.jsx)(de.N,{lines:8,fontSize:a.Z4.Size6,children:(0,w.hw)("Control whether content labeled with the following Content Classification Labels is removed from your Twitch browsing experience:","AnonCCLMenu")})}),(0,r.jsx)(o.P,{children:(0,r.jsx)(pe.F,{baseFontSize:a.Z4.Size6,children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Sexual Themes","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Drugs, Intoxication, or Excessive Tobacco Use","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Gambling","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Violent and Graphic Depictions","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Significant Profanity or Vulgarity","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Mature-Rated Games","AnonCCLMenu")})}),(0,r.jsx)("li",{children:(0,r.jsx)(de.N,{lines:2,children:(0,w.hw)("Politics and Sensitive Social Issues","AnonCCLMenu")})})]})})}),(0,r.jsx)(o.P,{children:(0,r.jsx)(de.N,{lines:3,children:(0,w.hw)("Find out more about our Content Classification Guidelines <x:link>here</x:link>.",{"x:link":function(e){return(0,r.jsx)(ge.Cb,{targetBlank:!0,linkTo:"https://help.twitch.tv/s/article/how-to-customize-content#ContentDisplayPreferences",children:e})}},"AnonCCLMenu")})})]})},ye=i(267369),Ce=i(636367),De=i(418460),Ne=i(70642),Le=i(588702),je=i(154125),Ie=function(e){var n,i,t,u=(0,s.useContext)(je.gQ),c=u.loading,l=u.data,d=null===(n=null==l?void 0:l.currentUser)||void 0===n?void 0:n.dropCurrentSession,f=(null==d?void 0:d.dropID)||"",p=(null===(i=null==d?void 0:d.game)||void 0===i?void 0:i.displayName)||"",g=(null===(t=null==d?void 0:d.channel)||void 0===t?void 0:t.name)||"",m=s.useState(f&&!c),v=m[0],h=m[1],k=s.useState(0),S=k[0],_=k[1];return s.useMemo((function(){var e,n,i=null!==(e=null==d?void 0:d.currentMinutesWatched)&&void 0!==e?e:0,t=null!==(n=null==d?void 0:d.requiredMinutesWatched)&&void 0!==n?n:0;i>=0&&t>0&&_(Math.min(Math.floor(i/t*100),100))}),[null==d?void 0:d.currentMinutesWatched,null==d?void 0:d.requiredMinutesWatched]),s.useEffect((function(){e.dropdownOpen&&c||h(f&&!c)}),[e.dropdownOpen,c,f]),v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.P,{padding:{y:1},children:(0,r.jsx)(Ne.z2,{value:S,mask:!0,size:Ne.Q8.Small})}),(0,r.jsx)(de.N,{color:a.Q1.Alt2,whiteSpace:Le.M$.PreWrap,children:(0,w.hw)("{progress}% progress toward {gameName} Drops on /{channelName}",{progress:S,gameName:p,channelName:g},"DropsProgress")})]}):null},Me=function(e){var n=w.Zn.get("drops_2_time_based_ui_enabled",!1);return(0,r.jsx)(o.P,{position:a.yX.Relative,fullWidth:!0,children:(0,r.jsx)(Ce.tD,{variant:Ce.hJ.Alpha,borderRadius:m.Z.Medium,linkTo:"/inventory","data-a-target":"inventory-dropdown-link",children:(0,r.jsxs)(o.P,{display:a.nl.Flex,alignItems:a.k2.Center,position:a.yX.Relative,padding:.5,flexDirection:a.bo.Row,children:[(0,r.jsx)(o.P,{flexShrink:0,padding:{right:.5},display:a.nl.Flex,alignSelf:a.gB.Start,flexDirection:a.bo.Column,children:(0,r.jsx)(De.C,{})}),(0,r.jsxs)(o.P,{flexGrow:1,display:a.nl.Flex,flexDirection:a.bo.Column,children:[(0,r.jsx)(de.N,{children:(0,w.hw)("Drops & Rewards","DropsInventoryUserMenuItem")}),n&&(0,r.jsx)(Ie,{dropdownOpen:e.dropdownOpen})]})]})})})},Pe=i(998760),Te=i(664955),Fe=i(635648),Ue=i(825948);!function(e){e.ArtistLink="user-menu-dropdown__artist-link",e.MainMenu="user-menu-dropdown__main-menu",e.LanguageSelectionMenu="user-menu-dropdown__language-selection-menu",e.ChannelLink="user-menu-dropdown__channel-link",e.DashboardLink="user-menu-dropdown__dashboard-link",e.StreamSummaryLink="user-menu-dropdown__stream_summary_link",e.PrivacyCenterLink="user-menu-dropdown__privacy-center-link",e.SafetyHubLink="user-menu-dropdown__safety-hub-link",e.VideoManagerLink="user-menu__video-manager-link",e.PaymentsLink="user-menu-dropdown__payments-link",e.SettingsLink="user-menu-dropdown__settings-link",e.SubscriptionsLink="user-menu-dropdown__subscriptions-link",e.LanguageLink="user-menu-dropdown__language-link",e.ExitLink="user-menu-dropdown__exit-link",e.LanguageSelectionMenuHeader="user-menu-dropdown__language-selection-menu-header",e.AnnualRecap="user-menu-dropdown__annual-recap"}(t||(t={}));var Ee,Ae=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={isLanguageSelection:!1,isCCLSelection:!1},n.containerRef=s.createRef(),n.renderMenu=function(){return n.state.isLanguageSelection?n.renderLanguageSelectionMenu():n.state.isCCLSelection?n.renderCCLSelectionMenu():n.renderMainMenu()},n.renderLanguageSelectionMenu=function(){return(0,r.jsxs)(o.P,{"data-test-selector":t.LanguageSelectionMenu,"data-a-target":"dropdown-language-selection",children:[(0,r.jsx)(J.e,{title:(0,w.hw)("Language","UserMenuLanguageSelector"),onClick:n.onBackClick,onBackClick:n.onBackClick,"data-test-selector":t.LanguageSelectionMenuHeader}),(0,r.jsx)(Pe.G,{user:n.props.user,width:n.getContainerWidth()})]},"user-menu-language")},n.renderCCLSelectionMenu=function(){return(0,r.jsxs)(o.P,{children:[(0,r.jsx)(J.e,{title:(0,w.hw)("Labeled Content","UserMenuCCLSelector"),onClick:n.onBackClick,onBackClick:n.onBackClick}),(0,r.jsx)(xe,{width:n.getContainerWidth()})]},"user-menu-labeled-content")},n.renderMainMenu=function(){var e=null;return n.props.user&&(e=(0,r.jsxs)(o.P,{children:[(0,r.jsx)(Fe.Q,{user:n.props.user,profileImageURL:n.props.profileImageURL}),n.renderSeparator(),(0,r.jsx)(j.i,{figure:{icon:I.a},linkTo:{pathname:"/".concat(n.props.user.login),state:{content:"self_channel",medium:"twitch_topnav"}},"data-a-target":"channel-dropdown-link","data-test-selector":t.ChannelLink,children:(0,w.hw)("Channel","UserMenuDropdown")}),!(0,K.fX)("cg-tcc-ss")&&(0,r.jsx)(j.i,{figure:{icon:M.A},linkTo:(0,re.K1)(n.props.user.login),"data-a-target":"video-manager-dropdown-link","data-test-selector":t.VideoManagerLink,children:(0,w.hw)("Video Producer","UserMenuDropdown")}),(0,r.jsx)(j.i,{linkTo:(0,oe.fY)(n.props.user.login),figure:{icon:P.L},"data-a-target":"dashboard-dropdown-link","data-test-selector":t.DashboardLink,children:(0,w.hw)("Creator Dashboard","UserMenuDropdown")}),(0,K.fX)("cg-tcc-ss")&&(0,r.jsx)(j.i,{figure:{icon:T.n},linkTo:(0,ae.On)(n.props.user.login),"data-a-target":"stream-summary-dropdown-link","data-test-selector":t.StreamSummaryLink,onClick:function(){return(0,L.W)("stream_summary")},children:(0,w.hw)("Stream Summary","UserMenuDropdown")}),(0,r.jsx)($.K,{name:"privacy_center",children:(0,r.jsx)(j.i,{linkTo:"/privacy",figure:{icon:F.X},"data-a-target":"dashboard-dropdown-link","data-test-selector":t.PrivacyCenterLink,children:(0,w.hw)("Privacy Center","UserMenuDropdown")})}),(0,r.jsx)(j.i,{linkTo:w.x2.config.moonbaseURL,figure:{icon:U.D},"data-a-target":"dashboard-dropdown-link","data-test-selector":t.SafetyHubLink,children:(0,w.hw)("Appeals Portal","UserMenuDropdown")}),(0,r.jsxs)($.K,{name:"artist-alley-feature",children:[n.renderSeparator(),(0,r.jsx)(j.i,{figure:{icon:E.y},linkTo:"/settings/artist","data-test-selector":t.ArtistLink,children:(0,w.hw)("Emote Attribution","UserMenuDropdown")})]}),n.renderSeparator(),(0,r.jsx)(j.i,{figure:{icon:A.n},linkTo:"/subscriptions","data-a-target":"subscriptions-dropdown-link","data-test-selector":t.SubscriptionsLink,children:(0,w.hw)("Subscriptions","UserMenuDropdown")}),(0,r.jsx)(Me,{dropdownOpen:n.props.dropdownOpen}),(0,r.jsx)(j.i,{figure:{icon:O.R},linkTo:"/wallet","data-a-target":"payments-dropdown-link","data-test-selector":t.PaymentsLink,children:(0,w.hw)("Wallet","UserMenuDropdown")}),n.renderSeparator(),(0,r.jsx)(j.i,{figure:{icon:R.i},linkTo:"/settings","data-a-target":"settings-dropdown-link","data-test-selector":t.SettingsLink,onClick:(0,L.W)(L.y.Settings),children:(0,w.hw)("Settings","UserMenuDropdown")}),(0,r.jsx)(j.i,{figure:{icon:V.x},"data-a-target":"onboarding-dropdown-link",onClick:n.onOnboardingClick,children:(0,w.hw)("Content Tuning","UserMenuDropdown")})]})),(0,r.jsx)(o.P,{"data-test-selector":t.MainMenu,"data-a-target":"dropdown-main","aria-label":(0,w.hw)("User Menu Options","UserMenuDropdown"),ref:n.containerRef,children:(0,r.jsx)(q.Vq,{className:"user-menu-dropdown__main-menu",children:(0,r.jsxs)(o.P,{padding:1,children:[e,(0,r.jsx)(j.i,{figure:{icon:W.P},actionIcon:"AngleRight",onClick:n.onLanguageClick,"data-a-target":"language-dropdown-link","data-test-selector":t.LanguageLink,children:(0,w.hw)("Language","TopNav")}),(0,r.jsx)(ye.o,{}),(0,r.jsx)(te,{}),!n.props.user&&(0,r.jsx)(j.i,{figure:{icon:B.M},actionIcon:"AngleRight",onClick:n.onCCLClick,children:(0,w.hw)("Labeled Content","TopNav")}),(0,r.jsx)(le.f,{user:n.props.user}),n.renderSeparator(),(0,r.jsx)(Te.B,{user:n.props.user})]})})},"user-menu-main")},n.renderSeparator=function(){return(0,r.jsx)(H.S,{overflow:a.nE.Auto,children:(0,r.jsx)("div",{onClick:Ue.d,children:(0,r.jsx)(z.m,{})})})},n.onLanguageClick=function(e){e.stopPropagation(),n.setState({isLanguageSelection:!0})},n.onCCLClick=function(e){e.stopPropagation(),n.setState({isCCLSelection:!0})},n.onBackClick=function(e){e.stopPropagation(),n.setState({isLanguageSelection:!1,isCCLSelection:!1})},n.onOnboardingClick=function(){(0,ue.wk)(ce.P9.UserMenu),n.props.showOnboardingModal({action:X.W.OnboardingModal,source:ce.P9.UserMenu})},n.getContainerWidth=function(){var e;return null===(e=n.containerRef.current)||void 0===e?void 0:e.getBoundingClientRect().width},n}return(0,p.__extends)(n,e),n.getDerivedStateFromProps=function(e,n){return{isLanguageSelection:e.dropdownOpen&&n.isLanguageSelection,isCCLSelection:e.dropdownOpen&&n.isCCLSelection}},n.prototype.render=function(){var e=this.state.isLanguageSelection?[G.ES.SlideOverRight,G.ES.SlideOverLeft]:[G.ES.SlideOverLeft,G.ES.SlideOverRight];return(0,r.jsx)(o.P,{overflow:a.nE.Hidden,children:(0,r.jsx)(Q.F,{duration:G.Cf.Medium,transitionType:e,children:this.renderMenu()})})},n}(s.Component),Oe=(0,l.Zz)((0,c.Ng)(null,(function(e){return(0,l.zH)({showOnboardingModal:function(e){var n=(0,p.__rest)(e,[]);return(0,Z.to)(se.p,n)}},e)})))(Ae),Re=i(827077),Ve=i.n(Re),We=(0,b.U)({name:"profile_picture",category:"broadcast"}),Be=We.Available,He=We.Unavailable;!function(e){e.Toggle="user-menu__toggle"}(Ee||(Ee={}));var ze=function(e){function n(n){var i=e.call(this,n)||this;return i.isSettingNewSession=!1,i.onToggle=function(e){e||(0,L.W)(L.y.AvatarDropdown)(),i.setState({dropdownOpen:!e})},i.dataIsReady=function(e){return e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser},i.setUserToOffline=function(){(0,y.$c)(C.SJR.OFFLINE),(0,y.CP)()},i.setNewSession=function(){return(0,p.__awaiter)(i,void 0,void 0,(function(){var e;return(0,p.__generator)(this,(function(n){switch(n.label){case 0:if(this.isSettingNewSession)return[2];this.isSettingNewSession=!0,n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,y.VS)()];case 2:return n.sent(),this.props.initialUserAvailabilitySet(),[3,5];case 3:return e=n.sent(),w.vF.warn("Failed to set new user availability session.",e),[3,5];case 4:return this.isSettingNewSession=!1,[7];case 5:return[2]}}))}))},i.props.subscribe((function(){i.setState({dropdownOpen:!1})})),i.state={dropdownOpen:!1},i}return(0,p.__extends)(n,e),n.prototype.componentDidMount=function(){this.props.firstPageLoaded&&this.dataIsReady(this.props)&&!this.props.initialUserAvailabilityIsSet&&this.setNewSession(),this.props.latencyTracking.reportInteractive()},n.prototype.componentDidUpdate=function(){this.props.firstPageLoaded&&this.dataIsReady(this.props)&&!this.props.initialUserAvailabilityIsSet&&this.setNewSession()},n.prototype.componentWillUnmount=function(){this.setUserToOffline()},n.prototype.render=function(){var e=this.props,n=e.user,i=e.data,t=i&&i.currentUser,s=t&&t.profileImageURL||void 0,u=(0,r.jsx)(g.M,{"data-a-target":"user-menu-toggle","data-test-selector":Ee.Toggle,"aria-expanded":this.state.dropdownOpen,children:(0,r.jsx)(o.P,{borderRadius:m.Z.Rounded,background:a.VS.Alt,overflow:a.nE.Hidden,children:(0,r.jsx)(v.Or,{width:30,height:30,"data-a-target":"top-nav-avatar"})})}),c=(0,w.hw)("User Menu","UserMenuButton");return n?t||(null==i?void 0:i.loading)?t&&(u=(0,r.jsx)(g.M,{"data-a-target":"user-menu-toggle","data-test-selector":Ee.Toggle,"aria-expanded":this.state.dropdownOpen,children:(0,r.jsx)(Be,{children:(0,r.jsx)(o.P,{background:a.VS.Base,children:(0,r.jsx)(S.e,{size:30,src:s,alt:(0,w.hw)("User Avatar","UserMenuButton"),userLogin:n&&n.login,"data-a-target":"top-nav-avatar"})})})})):u=(0,r.jsx)(g.M,{"data-a-target":"user-menu-toggle","data-test-selector":Ee.Toggle,"aria-label":c,"aria-expanded":this.state.dropdownOpen,children:(0,r.jsx)(He,{reason:"Missing user data to render profile picture.",children:(0,r.jsx)(h.a2,{icon:k.C,"aria-label":c})})}):u=(0,r.jsx)(g.M,{"data-a-target":"user-menu-toggle","data-test-selector":Ee.Toggle,"aria-label":c,"aria-expanded":this.state.dropdownOpen,children:(0,r.jsx)(Be,{children:(0,r.jsx)(h.a2,{icon:k.C,"aria-label":c})})}),(0,r.jsx)(o.P,{padding:{left:.5},position:a.yX.Relative,display:a.nl.Flex,flexGrow:1,alignItems:a.k2.Stretch,fullHeight:!0,"data-a-target":this.state.dropdownOpen?"dropdown-down":"dropdown-up",children:(0,r.jsxs)(D.U,{onToggle:this.onToggle,hideBalloonOnInsideClick:!0,children:[u,(0,r.jsx)(_.fK,{size:_.$V.Auto,children:(0,r.jsx)(Oe,{dropdownOpen:this.state.dropdownOpen,user:n,profileImageURL:s})})]})})},n}(s.Component),Ge=(0,l.Zz)((0,x._v)(Ve(),{skip:function(e){return!e.user}}),(0,N.W)("User"))(ze);var Qe=(0,c.Ng)((function(e){return{firstPageLoaded:e.session.firstPageLoaded,initialUserAvailabilityIsSet:e.session.initialUserAvailabilityIsSet}}),(function(e){return(0,l.zH)({initialUserAvailabilitySet:f.xI},e)}))((0,d.y)(Ge)),Je=function(e){var n=e.user?null:(0,r.jsx)(u.J,{});return(0,r.jsxs)(o.P,{flexWrap:a.I4.NoWrap,display:a.nl.Flex,children:[n,(0,r.jsx)(Qe,{user:e.user})]})}},513683:function(e,n,i){"use strict";i.d(n,{J:function(){return S}});var t,r=i(415044),o=i(868238),a=i(681685),s=i(369624),u=i(331635),c=i(474848),l=i(959340),d=i(914421),f=i(564368),p=i(296540),g=i(452088),m=i(82984),v=i(433086);!function(e){e.LoginButton="anon-user-menu__login-button",e.SignUpButton="anon-user-menu__sign-up-button"}(t||(t={}));var h=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.onLoginClick=function(){(0,v.W)(v.y.LogIn)(),n.props.login()},n.onSignUpClick=function(){(0,v.W)(v.y.SignUp)(),n.props.signup()},n}return(0,u.__extends)(n,e),n.prototype.render=function(){return(0,c.jsxs)(l.P,{className:"anon-user",flexWrap:d.I4.NoWrap,display:d.nl.Flex,"data-a-target":"user-card",children:[(0,c.jsx)(l.P,{padding:{x:.5},children:(0,c.jsx)(f.$n,{onClick:this.onLoginClick,variant:f.VQ.Secondary,"data-a-target":"login-button","data-test-selector":t.LoginButton,children:(0,g.hw)("Log In","top-nav")})}),(0,c.jsx)(l.P,{padding:{x:.5},children:(0,c.jsx)(f.$n,{onClick:this.onSignUpClick,variant:f.VQ.Primary,"data-a-target":"signup-button","data-test-selector":t.SignUpButton,children:(0,g.hw)("Sign Up","top-nav")})})]})},n}(p.Component),k=(0,m.W)("AnonUserMenu",{autoReportInteractive:!0})(h);var S=(0,r.Ng)(null,(function(e){return(0,o.zH)({login:function(){return(0,s.iD)(a.W.TopNavSignupButton)},signup:function(){return(0,s.$5)(a.W.TopNavSignupButton)}},e)}))(k)},664955:function(e,n,i){"use strict";i.d(n,{B:function(){return m}});var t,r=i(415044),o=i(868238),a=i(681685),s=i(369624),u=i(331635),c=i(474848),l=i(912800),d=i(368972),f=i(296540),p=i(452088);!function(e){e.LogInLogOutButton="user-menu__logout-button"}(t||(t={}));var g=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleLogInLogOut=function(){var e,i;null===(i=(e=n.props).onClick)||void 0===i||i.call(e),n.props.user?n.props.logout():n.props.login()},n}return(0,u.__extends)(n,e),n.prototype.render=function(){var e=this.props.user?(0,p.hw)("Log Out","UserMenuDropdown"):(0,p.hw)("Log In","UserMenuDropdown"),n=this.props.user?l.t.NavLogout:l.t.NavLogin;return(0,c.jsx)(d.i,{label:e,figure:{icon:n},onClick:this.handleLogInLogOut,"data-a-target":"dropdown-logout","data-test-selector":t.LogInLogOutButton})},n}(f.Component);var m=(0,r.Ng)(null,(function(e){return(0,o.zH)({login:function(){return(0,s.iD)(a.W.TopNavSignupButton)},logout:s.ri},e)}))(g)},635648:function(e,n,i){"use strict";i.d(n,{Q:function(){return k}});var t,r=i(331635),o=i(474848),a=i(792486),s=i(990768),u=i(305528),c=i(959340),l=i(914421),d=i(216042),f=i(312663),p=i(588702),g=i(296540),m=i(452088),v=i(433086),h=i(825948);!function(e){e.AvatarElement="user-menu-dropdown__avatar",e.AvatarPlaceholder="user-menu-dropdown__avatar-placeholder",e.DisplayName="user-menu-dropdown__display-name"}(t||(t={}));var k=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(n,e),n.prototype.render=function(){var e=this.props.profileImageURL?(0,o.jsx)(a.M,{linkTo:"/settings",onClick:(0,v.W)(v.y.Profile),children:(0,o.jsx)(s.e,{size:40,src:this.props.profileImageURL,alt:(0,m.hw)("User Avatar","UserMenuCard"),"data-a-target":"dropdown-avatar","data-test-selector":t.AvatarElement,userLogin:this.props.user.login})}):(0,o.jsx)(u.Or,{width:40,height:40,overlay:!0,"data-test-selector":t.AvatarPlaceholder});return(0,o.jsx)(c.P,{children:(0,o.jsxs)(c.P,{display:l.nl.Flex,padding:.5,children:[(0,o.jsxs)(c.P,{flexGrow:0,display:l.nl.Flex,flexDirection:l.bo.Column,children:[(0,o.jsx)(c.P,{flexGrow:0,children:e}),(0,o.jsx)(d.S,{flexGrow:1,children:(0,o.jsx)("div",{onClick:h.d})})]}),(0,o.jsx)(d.S,{flexGrow:1,padding:{left:1},display:l.nl.Flex,flexDirection:l.bo.Column,justifyContent:l.A9.Center,children:(0,o.jsx)("div",{onClick:h.d,children:(0,o.jsx)(c.P,{children:(0,o.jsx)(f.N,{type:p.M2.H6,bold:!0,"data-a-target":"user-display-name","data-test-selector":t.DisplayName,children:this.props.user.displayName})})})})]})})},n}(g.Component)}}]);